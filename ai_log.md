15.05.2025

Выполнена рефакторинг файла static/js/order_form.js:

- Переписал на модульную структуру: отдельные функции для получения конфига, получения услуг, обновления селекта, инициализации формы и улучшения поля даты.
- Добавил подробные console.log на каждом этапе для отладки.
- Убрал вложенные DOMContentLoaded, теперь только один обработчик на весь файл.
- Теперь код легко поддерживать, расширять и отлаживать.

Причина: устранение багов с неработающим JS и улучшение архитектуры.

P.S. Если что-то не работает — смело открывайте консоль, там теперь всё как на ладони!

15.05.2025

Добавил на главную страницу (landing.html) ссылку-кнопку "Записаться", ведущую на страницу создания заказа (order_create). Теперь пользователь может перейти к форме записи прямо с главной.

P.S. Теперь записаться на стрижку стало проще, чем найти свободного мастера в субботу!

15.05.2025

Внедрил защиту от двойной инициализации JavaScript файлов:

- Добавил проверку через window._orderFormInitialized в order_form.js
- Добавил проверку через window._testJsInitialized в test.js
- Теперь скрипты запускаются только один раз, даже если они случайно подключены дважды

Причина: исправление проблемы дублирования услуг в выпадающем списке формы заказа. Анализ логов показал, что JS скрипт загружается и выполняется дважды (возможно из-за особенностей загрузки или кеширования страниц).

P.S. Один мастер — одна услуга в списке! Никаких дублей, как и положено в приличном барбершопе.

15.05.2025

Внедрил защиту от двойной инициализации JavaScript файлов:

- Добавил проверку через window._orderFormInitialized в order_form.js
- Добавил проверку через window._testJsInitialized в test.js
- Теперь скрипты запускаются только один раз, даже если они случайно подключены дважды

Причина: исправление проблемы дублирования услуг в выпадающем списке формы заказа. Анализ логов показал, что JS скрипт загружается и выполняется дважды (возможно из-за особенностей загрузки или кеширования страниц).

P.S. Один мастер — одна услуга в списке! Никаких дублей, как и положено в приличном барбершопе.

15.05.2025

Добавлены подробные комментарии на русском языке в файл static/js/order_form.js:

- Прокомментированы все основные функции и алгоритмы
- Объяснена роль каждого блока кода
- Добавлены детальные пояснения к AJAX-запросам и манипуляциям с DOM
- Расшифрована логика работы с зависимым выпадающим списком услуг
- Объяснено назначение защиты от двойной инициализации

Теперь код будет гораздо проще поддерживать и модифицировать другим разработчикам.

20.05.2025 — Расширен конспект по Django Q2 в notes/q2.md: добавлены подробные разделы по хукам, сигналам, планировщику, очередям, цепочкам, админке, с примерами на основе текущего приложения. Исправлено форматирование Markdown для валидности и читаемости.
