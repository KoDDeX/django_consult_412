## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–∞–π–∫–æ–≤ üßê

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é! –°–µ–≥–æ–¥–Ω—è –º—ã –ø—Ä–æ–≤–µ–¥–µ–º –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –∫–∞–∑–∞–ª–æ—Å—å –±—ã, –ø—Ä–æ—Å—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî —Å–∏—Å—Ç–µ–º—ã –ª–∞–π–∫–æ–≤ –¥–ª—è –ø–æ—Å—Ç–æ–≤ –≤ –Ω–∞—à–µ–º –±–ª–æ–≥–µ. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —ç—Ç–∞ –∑–∞–¥–∞—á–∞ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç –≤—Å–µ —Å–ª–æ–∏ Django-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã: –æ—Ç –º–æ–¥–µ–ª–µ–π –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –¥–æ —à–∞–±–ª–æ–Ω–æ–≤ –∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ JavaScript. –ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç—Ä–∏ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–¥—Ö–æ–¥–∞, –¥–≤–∏–≥–∞—è—Å—å –æ—Ç —Å–∞–º–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –∏ –±–∞–∑–æ–≤–æ–≥–æ –∫ –Ω–∞–∏–±–æ–ª–µ–µ –≥–∏–±–∫–æ–º—É –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º—É. –¢–∞–∫–æ–π –ø–æ—à–∞–≥–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–∞–º –ø–æ–Ω—è—Ç—å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞ –∏ –≤—ã–±—Ä–∞—Ç—å —Ç–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–∏–ª—É—á—à–∏–º –æ–±—Ä–∞–∑–æ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ü–µ–ª—è–º –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

–ü–µ—Ä–≤—ã–π –ø–æ–¥—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ä–∞–∑–±–µ—Ä–µ–º, –º–æ–∂–Ω–æ –Ω–∞–∑–≤–∞—Ç—å **"–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º —Å–µ—Ä–≤–µ—Ä–Ω—ã–º –º–µ—Ç–æ–¥–æ–º"**. –û–Ω –æ–ø–∏—Ä–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Django, —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–æ–∂–Ω—ã–π JavaScript. –≠—Ç–æ –æ—Ç–ª–∏—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –±–∞–∑–æ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞.

### –ü–æ–¥—Ö–æ–¥ 1: –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –º–µ—Ç–æ–¥ üèõÔ∏è

–°—É—Ç—å —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ–±—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å—é –ª–æ–≥–∏–∫—É –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞. –ö–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –±—É–¥—å —Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–ª–∏ —Å–Ω—è—Ç–∏–µ –ª–∞–π–∫–∞, –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –≠—Ç–æ —Å–∞–º—ã–π –ø—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω—ã–π —Å–ø–æ—Å–æ–±, –∫–æ—Ç–æ—Ä—ã–π –∏–¥–µ–∞–ª—å–Ω–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –º–æ–¥–µ–ª–µ–π, URL-–º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –≤ Django.

–í –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ –ª–µ–∂–∏—Ç —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –≤ –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ –ø–æ–ª–µ `likes` –≤ –º–æ–¥–µ–ª–∏ `Post`. –ù–∞–ø–æ–º–Ω—é, –∫–∞–∫ –æ–Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤ —Ñ–∞–π–ª–µ `blog/models.py`.

```python
# blog/models.py

class Post(models.Model):
    # ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è ...
    likes = models.ManyToManyField(
        USER_MODEL, verbose_name="–õ–∞–π–∫–∏", blank=True, related_name="liked_posts"
    )
    # ...
```

–≠—Ç–æ –ø–æ–ª–µ —Ç–∏–ø–∞ `ManyToManyField` –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—à–µ–π –∑–∞–¥–∞—á–∏, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Å–æ–∑–¥–∞–µ—Ç —Å–≤—è–∑—å "–º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º" –º–µ–∂–¥—É –ø–æ—Å—Ç–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è, —á—Ç–æ –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ª–∞–π–∫ –æ–¥–Ω–æ–º—É –ø–æ—Å—Ç—É.

>[!info]
>#### –ú–æ–¥–µ–ª—å `ManyToManyField`
>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `ManyToManyField` ‚Äî —ç—Ç–æ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π –∏ –æ—á–µ–Ω—å "–¥–∂–∞–Ω–≥–æ–≤—Å–∫–∏–π" —Å–ø–æ—Å–æ–± —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏. Django –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –∑–∞ –Ω–∞—Å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö —Å–≤—è–∑–µ–π, –∏–∑–±–∞–≤–ª—è—è –æ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–∏—Å–∞—Ç—å SQL-–∑–∞–ø—Ä–æ—Å—ã –≤—Ä—É—á–Ω—É—é.

–î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–≥–∏–∫–∏ –Ω–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (view). –≠—Ç–æ –±—É–¥–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `POST`-–∑–∞–ø—Ä–æ—Å, –Ω–∞—Ö–æ–¥–∏—Ç –Ω—É–∂–Ω—ã–π –ø–æ—Å—Ç –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞ –∑–∞—Ç–µ–º –ª–∏–±–æ –¥–æ–±–∞–≤–ª—è–µ—Ç –ª–∞–π–∫, –ª–∏–±–æ —É–±–∏—Ä–∞–µ—Ç –µ–≥–æ. –í–∞–∂–Ω–µ–π—à–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º –∑–¥–µ—Å—å —è–≤–ª—è–µ—Ç—Å—è –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `@login_required`, –∫–æ—Ç–æ—Ä—ã–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ª–∞–π–∫–∏ –º–æ–≥—É—Ç —Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏.

```python
# blog/views.py

from django.shortcuts import redirect, get_object_or_404
from django.contrib.auth.decorators import login_required

@login_required
def toggle_like_classic(request, post_id):
    post = get_object_or_404(Post, id=post_id)
    user = request.user
    if post.likes.filter(id=user.id).exists():
        post.likes.remove(user)
    else:
        post.likes.add(user)
    return redirect('blog:post_detail', slug=post.slug) # –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ—Å—Ç–∞
```

–ö–∞–∫ –≤–∏–¥–∏—Ç–µ, –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º `redirect` –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ—Å—Ç–∞. –ò–º–µ–Ω–Ω–æ —ç—Ç–æ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –ù–∞–∫–æ–Ω–µ—Ü, –≤ —à–∞–±–ª–æ–Ω–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ `post_card_include.html`, –º—ã —Ä–∞–∑–º–µ—â–∞–µ–º –∫–Ω–æ–ø–∫—É –ª–∞–π–∫–∞ –≤–Ω—É—Ç—Ä–∏ —Ñ–æ—Ä–º—ã, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `POST`-–∑–∞–ø—Ä–æ—Å –Ω–∞ –Ω–∞—à –Ω–æ–≤—ã–π URL.

### –ü–æ–¥—Ö–æ–¥ 2: –ì–∏–±—Ä–∏–¥–Ω—ã–π AJAX-–º–µ—Ç–æ–¥ üöÄ

–•–æ—Ç—è –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ –Ω–∞–¥–µ–∂–µ–Ω, –µ–≥–æ –≥–ª–∞–≤–Ω—ã–π –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ ‚Äî –ø–ª–æ—Ö–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç –∏–∑-–∑–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å—Ç—Ä–µ–º—è—Ç—Å—è –∫ –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏. –ò–º–µ–Ω–Ω–æ —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É —Ä–µ—à–∞–µ—Ç –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥, —Å–æ—á–µ—Ç–∞—é—â–∏–π –º–æ—â—å –±—ç–∫–µ–Ω–¥–∞ Django —Å –≥–∏–±–∫–æ—Å—Ç—å—é –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ JavaScript (AJAX).

–ò–¥–µ—è –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ–±—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –ª–∞–π–∫–∞ "–Ω–∞ –ª–µ—Ç—É", –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏. JavaScript –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–æ–Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –ø–æ–ª—É—á–∞—Ç—å –≤ –æ—Ç–≤–µ—Ç —Ç–æ–ª—å–∫–æ —Å–∞–º—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤) –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –º–∞–ª–µ–Ω—å–∫–∏–π –∫—É—Å–æ—á–µ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

>[!warning]
>#### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å ‚Äî –∫–ª—é—á –∫ —É—Å–ø–µ—Ö—É
>AJAX (Asynchronous JavaScript and XML) ‚Äî —ç—Ç–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π, –ø–æ–∫–∞ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è.

–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –Ω–µ–º–Ω–æ–≥–æ –º–µ–Ω—è–µ—Ç—Å—è. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `redirect`, –Ω–∞—à–∞ view –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `JSON`. –≠—Ç–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º.

```python
# blog/views.py

from django.http import JsonResponse

@login_required
@require_POST # –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ view –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–æ–ª—å–∫–æ POST-–∑–∞–ø—Ä–æ—Å—ã
def toggle_like_ajax(request, post_id):
    post = get_object_or_404(Post, id=post_id)
    user = request.user
    liked = False
    if post.likes.filter(id=user.id).exists():
        post.likes.remove(user)
    else:
        post.likes.add(user)
        liked = True
    return JsonResponse({"total_likes": post.likes.count(), "liked": liked})
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Ç–µ–ø–µ—Ä—å –º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º `JsonResponse` —Å –¥–≤—É–º—è –∫–ª—é—á–µ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏: `total_likes` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –∏ `liked` (–±—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ), —á—Ç–æ–±—ã JavaScript –∑–Ω–∞–ª, –∫–∞–∫—É—é –∏–∫–æ–Ω–∫—É –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é. –ù–∞–ª–∏—á–∏–µ –≤ –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ —Ñ–∞–π–ª–æ–≤ `reviews.js` –∏ `order_form.js` –ø—Ä—è–º–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –ø–æ–¥–æ–±–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∏ –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±—É–¥–µ—Ç –æ—Ä–≥–∞–Ω–∏—á–Ω–æ –≤ –Ω–µ–µ –≤—Å—Ç—Ä–æ–µ–Ω.

–ù–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞, –≤ —à–∞–±–ª–æ–Ω–µ, –º—ã –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–≥ `<form>`. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º—ã —Å–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç—É—é –∫–Ω–æ–ø–∫—É –∏–ª–∏ —Å—Å—ã–ª–∫—É —Å–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ `data-*` –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—à JavaScript –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ—Å—Ç–∞. –ê –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º `.js` —Ñ–∞–π–ª–µ –º—ã –ø–∏—à–µ–º –ª–æ–≥–∏–∫—É, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∫–ª–∏–∫, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `fetch`-–∑–∞–ø—Ä–æ—Å –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç DOM –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ JSON-–æ—Ç–≤–µ—Ç–∞.

### –ü–æ–¥—Ö–æ–¥ 3: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–ê–Ω–æ–Ω–∏–º–Ω—ã–µ + –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ª–∞–π–∫–∏) üåê

–≠—Ç–æ –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∏ –∫–ª–∏–µ–Ω—Ç–æ–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥. –ï–≥–æ —Ü–µ–ª—å ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–≤–ª–µ—á—å **–ª—é–±–æ–≥–æ** –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è, –ø–æ–∑–≤–æ–ª–∏–≤ –µ–º—É —Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫–∏ –¥–∞–∂–µ –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏. –≠—Ç–æ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –∑–∞ —Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ –º–µ—Ö–∞–Ω–∏–∑–º —Å–µ—Å—Å–∏–π Django. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª–µ–µ —Å–µ—Ä—å–µ–∑–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –≤ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö.

–°—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–ª–µ `ManyToManyField` –Ω–∞–º —É–∂–µ –Ω–µ –ø–æ–¥–æ–π–¥–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–æ –∂–µ—Å—Ç–∫–æ —Å–≤—è–∑—ã–≤–∞–µ—Ç –ª–∞–π–∫ —Å –∑–∞–ø–∏—Å—å—é –≤ —Ç–∞–±–ª–∏—Ü–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ù–∞–º –Ω—É–∂–Ω–∞ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è –º–æ–¥–µ–ª—å `Like`, –∫–æ—Ç–æ—Ä–∞—è —Å–º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Å–≤—è–∑—å –ª–∏–±–æ —Å `User`, –ª–∏–±–æ —Å –∞–Ω–æ–Ω–∏–º–Ω–æ–π —Å–µ—Å—Å–∏–µ–π.

```python
# blog/models.py (–ø—Ä–∏–º–µ—Ä –Ω–æ–≤–æ–π –º–æ–¥–µ–ª–∏)

class Like(models.Model):
    post = models.ForeignKey(Post, on_delete=models.CASCADE, related_name='post_likes')
    user = models.ForeignKey(USER_MODEL, on_delete=models.CASCADE, null=True, blank=True, related_name='user_likes')
    session_key = models.CharField(max_length=40, null=True, blank=True)
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        # –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ø–∞—Ä–∞ (–ø–æ—Å—Ç, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å) –∏–ª–∏ (–ø–æ—Å—Ç, —Å–µ—Å—Å–∏—è) —É–Ω–∏–∫–∞–ª—å–Ω–∞
        unique_together = (('post', 'user'), ('post', 'session_key'))
```

>[!highlight]
>#### –ì–∏–±–∫–æ—Å—Ç—å –º–æ–¥–µ–ª–∏
>–ö–ª—é—á–µ–≤–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å —ç—Ç–æ–π –º–æ–¥–µ–ª–∏ ‚Äî –ø–æ–ª—è `user` –∏ `session_key` —è–≤–ª—è—é—Ç—Å—è –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ (`null=True`). –õ–æ–≥–∏–∫–∞ –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –≤ –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ **—Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ** –∏–∑ —ç—Ç–∏—Ö –¥–≤—É—Ö –ø–æ–ª–µ–π.

–õ–æ–≥–∏–∫–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (view) –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç—Å—è. –û–Ω–∞ –±–æ–ª—å—à–µ –Ω–µ –∑–∞—â–∏—â–µ–Ω–∞ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º `@login_required` –∏ –¥–æ–ª–∂–Ω–∞ —Å–∞–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å, —Å –∫–µ–º –∏–º–µ–µ—Ç –¥–µ–ª–æ.

1.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** View –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç `request.user.is_authenticated`.
2.  **–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω:** –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `user.id`. –û–Ω–∞ –∏—â–µ—Ç, —Å–æ–∑–¥–∞–µ—Ç –∏–ª–∏ —É–¥–∞–ª—è–µ—Ç –ª–∞–π–∫, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
3.  **–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–Ω–æ–Ω–∏–º–Ω—ã–π:** –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `request.session.session_key`. –û–Ω–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏, –µ—Å–ª–∏ –µ–µ –Ω–µ—Ç, –∞ –∑–∞—Ç–µ–º –∏—â–µ—Ç, —Å–æ–∑–¥–∞–µ—Ç –∏–ª–∏ —É–¥–∞–ª—è–µ—Ç –ª–∞–π–∫, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π –∫ —ç—Ç–æ–º—É –∫–ª—é—á—É —Å–µ—Å—Å–∏–∏.

–°–∞–º–∞—è —ç–ª–µ–≥–∞–Ω—Ç–Ω–∞—è –∏ —Å–ª–æ–∂–Ω–∞—è —á–∞—Å—Ç—å —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ ‚Äî **–º–µ—Ö–∞–Ω–∏–∑–º —Å–ª–∏—è–Ω–∏—è –ª–∞–π–∫–æ–≤**. –ö–æ–≥–¥–∞ –∞–Ω–æ–Ω–∏–º–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –Ω–∞—Å—Ç–∞–≤–∏–≤—à–∏–π –ª–∞–π–∫–æ–≤, –Ω–∞–∫–æ–Ω–µ—Ü —Ä–µ—à–∞–µ—Ç –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, –µ–≥–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ª–∞–π–∫–∏ –¥–æ–ª–∂–Ω—ã —Å—Ç–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º–∏. –≠—Ç–æ —Ä–µ—à–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Å–∏–≥–Ω–∞–ª–æ–≤ Django, –Ω–∞–ø—Ä–∏–º–µ—Ä, `user_logged_in`.

>[!info]
>#### –°–∏–≥–Ω–∞–ª—ã Django
>–°–∏–≥–Ω–∞–ª—ã ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è–º —É–≤–µ–¥–æ–º–ª—è—Ç—å –Ω–∞–±–æ—Ä –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π –æ —Ç–æ–º, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ, —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å) –ø–æ—Å—ã–ª–∞–µ—Ç —Å–∏–≥–Ω–∞–ª `user_logged_in` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ú—ã –ø–∏—à–µ–º —Ñ—É–Ω–∫—Ü–∏—é-–ø–æ–ª—É—á–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä–∞—è "—Å–ª—É—à–∞–µ—Ç" —ç—Ç–æ—Ç —Å–∏–≥–Ω–∞–ª. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ö–æ–¥–∏—Ç –≤ —Å–∏—Å—Ç–µ–º—É, —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –ª–∞–π–∫–∏, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ –µ–≥–æ `session_key`, –∏ "–ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç" –∏—Ö –Ω–∞ –µ–≥–æ `user.id`, –æ—á–∏—â–∞—è `session_key`. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–≥–ª—è–¥–∏—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ –±–µ—Å—à–æ–≤–Ω–æ ‚Äî –≤—Å–µ –µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ –µ–≥–æ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å. –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥, —Ö–æ—Ç—å –∏ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–∏—Ö —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç, –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–∏–ª—É—á—à–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤–æ–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏—Ç–æ—Ä–∏–∏.
